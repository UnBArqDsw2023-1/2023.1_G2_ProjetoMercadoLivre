# Documento de arquitetura de software

## 1. Introdução

&emsp;&emsp; No presente documento, abordamos como a arquitetura do software no contexto do fluxo de avaliações do Mercado Livre ficaria em nossa concepção, abordando conceitos aprendidos em sala.

### 1.1 Propósito

&emsp;&emsp; O propósito deste Documento de Arquitetura de Software (DAS) é fornecer uma visão geral da arquitetura do sistema de Avaliação de Produtos do Mercado Livre. Ele descreve as decisões e diretrizes arquiteturais adotadas para garantir um design robusto, escalável e de fácil manutenção. O DAS também serve como referência para a equipe de desenvolvimento e outras partes interessadas, ajudando a garantir a consistência e compreensão compartilhada da arquitetura do software.

### 1.2 Escopo

&emsp;&emsp; Este DAS abrange a arquitetura do aplicativo de Avaliação de Produtos do Mercado Livre. Ele inclui a estrutura geral do sistema, as principais componentes, interfaces, fluxos de informação e as interações entre os diversos módulos do software.

&emsp;&emsp; Adotamos o mapa mental como uma abordagem inicial para definir o escopo do projeto, a equipe pode realizar uma sessão de brainstorming para identificar e listar os diferentes aspectos relacionados ao sistema em desenvolvimento. Os membros da equipe podem contribuir com suas perspectivas e conhecimentos para adicionar elementos importantes ao mapa mental. Segue abaixo o mapa mental em sua versão final.

<iframe width="768" height="432" src="https://miro.com/app/live-embed/uXjVMR5ENS8=/?moveToViewport=-42705,493,30166,23057&embedId=786895539513" frameborder="0" scrolling="no" allow="fullscreen; clipboard-read; clipboard-write" allowfullscreen></iframe>

<p align='center'>
Mapa mental <br> Autor: Todos integrantes
</p>

### 1.3 Definições

- DAS (Documento de Arquitetura de Software): Documento que descreve a arquitetura de software de um sistema, incluindo decisões arquiteturais, componentes e suas interações.

### 1.5 Visão Geral

&emsp;&emsp; O documento apresenta as decisões arquiteturais para o fluxo de avaliação do mercado livre voltadas para o perfil plataforma e o perfil comprador, que compreendende todo o fluxo e interação dos participantes com as avaliações do mercado livre, envolvendo alguns artefatos já desenvolvidos durante a disciplina de Arquitetura e Desenho de Software e artefatos fundamentais para o entendimento da arquitetura do sistema.

## 2. Representação arquitetural

## 2.1 Diagrama de classes

&emsp;&emsp; Abaixo mostramos o nosso diagrama de classes, que é uma representação visual das classes, interfaces, atributos e métodos que compõem nosso fluxo de avaliação de produto do Mercado Livre.

![Diagrama de classes](./../Assets/diagramas/ClassesV4.png)

<figcaption align='center'>
    <b>Figura 1: Diagrama de Classes</b>
    <br><small>Fonte: Elaboração Própria</small>
</figcaption> </center>

### 2.2 Diagrama de pacotes

&emsp;&emsp; Um diagrama de pacotes é um diagrama estrutural definido pela UML que descreve os pacotes ou pedaços do sistema divididos em agrupamentos lógicos mostrando as dependências entre eles. Este diagrama é muito utilizado para ilustrar a arquitetura de um sistema mostrando o agrupamento de suas classes .

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/PacotesV2.png" alt="descrição da imagem" style="margin-right: 20px;"/>
  <figcaption align='center'>
    <b>Figura 2: Diagrama de Pacotes</b>
    <br><small>Fonte: Elaboração Própria</small>
</figcaption> </center>
</div>

### 2.3 Diagrama de estados

&emsp;&emsp; O diagrama de estados é uma representação visual que descreve os diferentes estados que um objeto ou sistema pode assumir e as transições entre esses estados. É uma ferramenta amplamente utilizada na modelagem e no design de sistemas, auxiliando no entendimento e na comunicação das interações e comportamentos de um sistema.

<br>

<div style="width: 640px; height: 480px; margin: 10px; position: relative;"><iframe allowfullscreen frameborder="0" style="width:640px; height:480px" src="https://lucid.app/documents/embedded/06f05d2e-62cb-4351-a339-0fa45449264d" id="BvjYAfOoeRZi"></iframe></div>

<figcaption align='center'>
    <b>Figura 3: Diagrama de estados</b>
    <br><small>Fonte: Elaboração Própria</small>
</figcaption> </center>

<br>

### 2.4 Diagrama de colaboração

&emsp;&emsp; Abaixo, apresentamos os diagramas de colaboração, que é uma ferramenta visual utilizada na modelagem de sistemas para ilustrar a interação entre os objetos envolvidos em um determinado cenário ou processo. O objetivo destes diagramas é representar como os objetos colaboram entre si, trocando mensagens e compartilhando informações para realizar uma tarefa específica. No contexto do nosso projeto, elaboramos o diagrama com base nas interações entre o vendedor, o comprador e a plataforma, considerando o fluxo de avaliação em situações específicas definidas.

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/Colaboracao2.png" alt="" style="margin-right: 20px;"/>
  <div style="flex-grow: 1;">
    <h6 style="text-align: flex;">
    Figura 4 : Interação de avaliação comprador pré-compra
    </h6>
  </div>
</div>

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/Colaboracao1.png" alt="" style="margin-right: 20px;"/>
  <div style="flex-grow: 1;">
    <h6 style="text-align: flex;">
    Figura 5 : Interação de avaliação comprador pós-compra
    </h6>
  </div>
</div>

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/Colaboracao3.png" alt="" style="margin-right: 20px;"/>
  <div style="flex-grow: 1;">
    <h6 style="text-align: flex;">
    Figura 6 : Interação de avaliação vendedor pós-compra
    </h6>
  </div>
</div>

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/Colaboracao4.png" alt="" style="margin-right: 20px;"/>
  <div style="flex-grow: 1;">
    <h6 style="text-align: flex;">
    Figura 7 : Interação de avaliação plataforma 
    </h6>
  </div>
</div>

## 3. Objetivos e restrições arquiteturais

## 4. Visão de casos de uso

As visões arquiteturais de casos de uso desempenham um papel crucial na definição e no entendimento da arquitetura de um sistema de software, descrevendo como os casos de uso identificados no processo de análise de requisitos se relacionam com a estrutura e os componentes do sistema. Ela ajuda a identificar os principais atores, suas interações com o sistema e os fluxos de informações envolvidos.

Ao criar uma visão arquitetural de casos de uso, os arquitetos de software podem visualizar e comunicar de forma clara como o sistema irá atender às necessidades dos usuários, facilitando a tomada de decisões arquiteturais e o alinhamento entre os requisitos e o design do sistema.

### 4.1. Casos de uso

#### Participantes

|    Participante    |
| :----------------: |
|    Adne Moretti    |
|  Gabriel Moretti   |
| Leonardo Vitoriano |
|   Letícia Aires    |

Para confeccionar os casos de uso, foi realizada uma reunião entre os integrantes do grupo para realizar uma discussão sobre a criação e organização de seus elementos, também com as relações entre eles. Durante a reunião, foram criados os seguintes casos de uso:

### 4.1.1 Tabelas e diagrama de casos de uso

#### Atores

| Número |    Ator    |                              Descrição                              |
| :----: | :--------: | :-----------------------------------------------------------------: |
|   1    | Comprador  | Usuário comprador de produtos e avaliador no site do Mercado Livre  |
|   2    |  Vendedor  | Usuário vendedor de produtos e mantenedor no site do Mercado Livre  |
|   3    | Plataforma | Plataforma do Mercado Livre, responsável pelo gerenciamento do site |

#### Tabela de itens

| Código |      Descrição      |
| :----: | :-----------------: |
|  US01  |    Vende produto    |
|  US02  |   Compra produto    |
|  US03  |  Visualiza produto  |
|  US04  |  Realiza avaliação  |
|  US05  | Preenche formulário |
|  US06  |   Relata problema   |
|  US07  | Realiza comentário  |
|  US08  | Responde comentário |
|  US09  | Visualiza avaliação |
|  US10  |  Vota em avaliação  |
|  US11  |  Modera avaliação   |
|  US12  |  Exclui avaliação   |
|  US13  |   Edita avaliação   |
|  US14  |  Filtra avaliações  |
|  US15  |  Notifica vendedor  |
|  US16  | Notifica comprador  |
|  US17  |   Indica produto    |

#### Tabela de dependências

|   Relação   |  Tipo  |
| :---------: | :----: |
| US05 X US04 | EXTEND |
| US06 X US05 | EXTEND |
| US07 X US05 | EXTEND |
| US12 X US11 | EXTEND |

#### Diagrama de casos de uso

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/CasosDeUsoV1.png" alt="" style="margin-right: 20px;"/>
  <div style="flex-grow: 1;">
    <h6 style="text-align: flex;">
    Figura 8 : Diagrama de casos de uso V1
    </h6>
  </div>
</div>

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/CasosDeUsoV2.png" alt="" style="margin-right: 20px;"/>
  <div style="flex-grow: 1;">
    <h6 style="text-align: flex;">
    Figura 9 : Diagrama de casos de uso V2
    </h6>
  </div>
</div>

## 5. Visualização lógica

&emsp;&emsp;A visão lógica de um documento arquitetural de software descreve a estrutura interna do sistema e como seus diferentes componentes se relacionam entre si de forma lógica. Essa visão tem como objetivo principal fornecer uma representação abstrata do sistema, destacando os principais elementos funcionais e suas interações.

### 5.1 Visão Geral

&emsp;&emsp;A visão lógica concentra-se nos conceitos e nas funcionalidades do software, em vez de detalhar aspectos técnicos ou físicos da implementação. Ela ajuda a entender a organização geral do sistema, suas principais características e a lógica por trás do seu funcionamento.

### 5.2 Pacotes de design arquitetonicamente significativos

Para o nosso projeto utilizamos a visão lógica nos seguintes diagramas:

- [Diagrama de classes](../Modelagem/Estaticos/classes.md)
  - Para o diagrama de classes, buscamos dividir o fluxo de avaliação do sistema do Mercado Livre, da melhor forma pelo que entendemos, utilizando os seguites padrões de projeto:
    - Adapter;
    - Decorator;
    - Strategy e decorator juntos;
    - Template method;
    - Factory e inversão de dependêncial
  - O ponto central dessa Arquitetura roda em cima da Classe Avaliation, pois é ela que armazena todo conteúdo de uma avaliação, que representa o intuito do nosso sistema.
- [Diagrama de Pacotes](../Modelagem/Estaticos/pacotes.md)
  - Para o Diagrama de pacotes dividimos em 3 Grandes pacotes, Onde há 3 Pacotes principais do software que São:
    - Client: o Client é o pacote que mostra como o usuário se conecta com a aplicação, para a nossa motivação, Avalição do Mercado Livre, por web ou por mobile.
    - Application: É o pacote onde possui o Front-end e o Back-end do sistema
    - Database: O pacote Database representa a base de dados do sistema, onde é modelado tabelas de acordo com as principais classes que regem a regra de negócio construídas no diagrama de classes. São elas: Order, Product, User, Seller, Buyer, Avaliation e Comment.
- [Diagrama de colaboração](../Modelagem/Dinamicos/colaboracao.md)
  - Para mostrar como objetos relacionam-se uns com os outros, dividimos em 4 diagramas que representam a interação entre os objetos envolvidos em um determinado cenário ou processo, no nosso sistema, fizemos os seguintes diagramas:
    - Interação comprador pré-compra
    - Interação comprador pós compra
    - Interação vendedor pós compra
    - Interação plataforma
- [Diagrama de estados](../Modelagem/Dinamicos/estados.md)
  - Para descrever diversos aspectos relacionados a transições de estados que um objeto pode ter realizamos um diagrama de Estados contendo dois fluxos Principais:
    - Fluxo do Produto, que descreve os estados que um produto, por mais que não represente o fluxo principal da aplicação representa o ponto de partida para o fluxo de avaliação do Mercado Livre.
    - Fluxo de Avaliação, representa os Estados chave da aplicação do fluxo de avaliação do Mercado Livre.

## 6. Visão de processo

## 7. Visão de implantação

## 8. Visão de implementação

&emsp;&emsp; A visão de implementação descreve a organização de módulos de software estáticos (código-fonte, arquivos de dados, executáveis, documentação etc.) no ambiente de desenvolvimento em termos de:

- Embalagem e camadas
- Gerenciamento de configuração (propriedade, estratégia de liberação etc.)

Vale também lembrar que a visão de implementação concentra-se em transformar a visão lógica e suas entidades e dividí-las em componentes reais de software.

### 8.1. Visão geral
&emsp;&emsp; Os componentes identificados pelo grupo para a criação do diagrama UML de componentes foram traduzidos de funções identificadas previamente na produção do [Rich Picture](../Base/richPicture.md) com a finalidade de mapear o que é necessário para que o sistema implemente a funcionalidade de avaliação de produtos comprados.

### 8.2. Diagrama de componentes
![Diagrama de componentes](./../Assets/diagramas/componentes.png)

## 9. Visão de Dados

&emsp;&emsp; A visão de Dados se concentra na estrutura e organização dos dados persistentes utilizados pelo sistema. Ela descreve como os dados são armazenados, acessados e manipulados, incluindo as entidades de dados, seus atributos e relacionamentos.

### 9.1. Modelo Entidade-Relacionamento (ME-R)

&emsp;&emsp; Um modelo entidade-relacionamento (MER) é um tipo de modelo de dados usado para representar a estrutura e os relacionamentos entre as entidades de um sistema. Ele fornece uma representação visual das entidades, seus atributos e as associações entre elas.

&emsp;&emsp; No modelo entidade-relacionamento, as entidades são representadas como retângulos e os relacionamentos são representados como linhas que conectam as entidades. Cada entidade possui atributos que descrevem características específicas dela. Segue abaixo, o nosso modelo.

### Entidades

- USER
- BUYER
- SELLER
- ORDER
- PRODUCT
- COMMENT
- AVALIATION

### Descrição das Entidades

- USER ( <span style="text-decoration: underline;">cpfUser</span>, address(cep, street, number, neighborhood, city, state), name, email, {phone} )
- BUYER ( <span style="text-decoration: underline;">idBuyer</span>, orderAmount, cpfUser )
- SELLER (<span style="text-decoration: underline;">idSeller</span>, reputation, cpfUser)
- ORDER ( <span style="text-decoration: underline;">idOrder</span>, state, idBuyer, idProduct)
- PRODUCT (<span style="text-decoration: underline;">idProduct</span>, name, price, description, caracteristic, stock, idSeller)
- COMMENT (<span style="text-decoration: underline;">idComment</span>, likes, deslikes, text)
- AVALIATION (<span style="text-decoration: underline;">idAvaliation</span>, avaliationDate, classification, idComment)

### Descrição dos relacionamentos

- AVALIATION **- has -** COMMENT <br>
  One AVALIATION can have only one COMMENT, and one COMMENT can belong to one AVALIATION.

  Cardinality: **(1:1)**

- SELLER **- sell -** PRODUCT<br>
  One SELLER can sell one or more PRODUCTs, and one PRODUCT can be sold by one SELLER.

  Cardinality: **(1:n)**

- BUYER **- buy -** PRODUCT<br>
  One BUYER can buy one or more PRODUCTs, and one PRODUT can be bought by one or more BUYERs.

  Cardinality: **(n:m)**

- ORDER **- owns -** PRODUCT <br>
  One ORDER can owns one or more PRODUCTs, and one PRODUCT can belong to one or more ORDERs.

  Cardinality: **(n:m)**

- BUYER **- creates -** AVALIATION<br>
  One BUYER can create one or more AVALIATIONs, and one AVALIATION can be created by only one BUYERs.

  Cardinality: **(n:1)**

### 9.2. Diagrama Entidade-Relacionamento (DE-R)

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/ML_Conceitual.png" alt="" style="margin-right: 20px;"/>
  <div style="flex-grow: 1;">
    <h6 style="text-align: flex;">
    Figura 8: DE-R
    </h6>
  </div>
</div>

### 9.3. Diagrama Lógico de Dados (DLD)

<div style="display: center; align-items: center;">
  <img src="Assets/diagramas/ML_Logico.png" alt="" style="margin-right: 20px;"/>
  <div style="flex-grow: 1;">
    <h6 style="text-align: flex;">
    Figura 8: DE-R
    </h6>
  </div>
</div>

## 10. Tamanho e performance

&emsp;&emsp; Fizemos uma aplicação executada localmente, usando a linguagem TypeScript para o desenvolvimento dos padrões de projeto, onde no total, a aplicação possui 31,22 MegaBytes, e roda nos principais sistemas operacionais, Linux, Windows e MacOs.

Os requisitos mínímos para a execução são:

- Ter o node.js instalado na máquina na versão 16.20.0;

## 11. Qualidade

Para o projeto visamos utilizar o modelo de qualidade ISO/IEC 25010, que determina caracteristicas e subcaracteristicas relevantes para o produto de software.

- **Extensabilidade**: Com a adoção de padrões de projeto que utilizamos em nosso projeto e a reutilização de código, a aplicação pode ser facilmente adaptada para atender a novos requisitos ou adicionar funcionalidades extras no futuro.
- **Portabilidade**: Como descrevemos no [Diagrama de Pacotes](../Modelagem/Estaticos/pacotes.md) onde há um pacote de Client, que representa um consumo dos serviços utilizados pela Application, indicando que o sistema deve possuir a subcaracteristica **Adaptabilidade**, então o sistema deve poder se adaptar entre diferentes sistemas operacionais e hardwares.
- **Segurança**: Para a seguraça é importante que o sistema proporcione **Confidencialidade** ,**Autenticidade** **Integridade**, pois para esse fluxo de Avaliação do Mercado Livre lidamos com dados dos Usuário, descritos na Lei Geral de Proteção de Dados Pessoais (LGPD), Lei n° 13.709/2018, que trata de dados pessoais, dispostos em meio físico ou digital, feito por pessoa física ou jurídica de direito público ou privado.
- **Manutenabilidade**: Como desenvolvemos uma estrutura de pacotes onde cada módulo possui alguns graus de dependencia e que camadas de maior baixo nível não devem depender de camadas de nível maior, como descrevemos no [Diagrama de Pacotes](../Modelagem/Estaticos/pacotes.md), onde a Camada de Data não deve depender do Controlador, isso representa a subcaracteristicas **Modularidade**.

## 12. Histórico de versão

| Versão |                 Alteração                  |                   Responsável                   | Revisor | Data  |
| :----: | :----------------------------------------: | :---------------------------------------------: | :-----: | :---: |
|  1.0   |        Criando escopo do documento         | João Henrique, Adne Moretti , Marcos e Leonardo | Cicero  | 28/06 |
|  2.0   | Adicionando modelo entidade relacionamento |     João Henrique, Adne Moretti e Leonardo      | Arthur  | 28/06 |
|  3.0   |           Adicionando DE-R e DLD           |               Leonardo Vitoriano                | Marcos  | 30/06 |
|  3.1   |     Adicionando visão de casos de uso      |        Adne, Gabriel, Leonardo, Letícia         | Cícero  | 30/06 |
|  3.2   |     Adicionando início da Visão lógica     |                  João Henrique                  | Gabriel | 01/07 |
|  3.3   |          Refatorando Visão Lógica          |              João Henrique, Arthur              | Cícero  | 01/07 |
|  4.0   |           Adicionando Qualidade            |              João Henrique, Arthur              |  Adne   | 01/07 |
|  4.1   |   Adicionando explicação do que é o MER    |                     Marcos                      |  Adne   | 02/07 |
|  4.2   |   Adicionando versão 2 dos casos de uso    |                     Gabriel                     | Letícia | 03/07 |
|  4.3   |     Adicionando Tamanho e performance      |                  João Henrique                  | Matheus | 03/07 |

## 13 Referências

- [ISO/IEC 25010](https://iso25000.com/index.php/en/iso-25000-standards/iso-25010);
- [Class notes, University of Victoria](https://www.ece.uvic.ca/~itraore/seng422-05/notes/arch05-5.pdf);
-
